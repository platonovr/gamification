<ng-include src="'/parts/sidebar.html'"></ng-include>
<div class="main_content">
    <div class="challenges add_challenge">
        <h2>
            <span class="icon icon-bookmark_icon"></span>
            <span>Создание нового задания</span>
        </h2>

        <form id="taskForm">
            <div class="field">
                <label for="name">Название*:</label>
                <input id="name" ng-model="newTask.name" ng-change="errors=null">
                <label style="color: red" ng-show="errors.name!=null">{{errors.name}}</label>
            </div>
            <!--<label>Название*:<input name="name" ng-model="newTask.name" ng-change="errors=null"></label>-->
            <div class="field">
                <label for="subject">Предмет:</label>
                <input id="subject" ng-model="newTask.subject">
            </div>
            <div class="field">
                <label for="category">Категория*:</label>
                <select name="cat" id="category" ng-model="newTask.category"
                        ng-options="category.name as category.name for category in categories"
                        ng-change="errors=null"></select>
                <label style="color: red" ng-show="errors.category!=null">{{errors.category}}</label>
            </div>

            <div class="field">
                <label for="teacher">Преподаватель:</label>
                <input name="creator" ng-model="newTask.creator" id="teacher">
            </div>
            <div class="field">
                <label for="group">Курсы/группы:</label>
                <input id="group" class="ui-autocomplete-input" ng-model="newTask.groups"
                       ng-list autocomplete="off">

                <div class="group_elements">
                    <div ng-repeat="group in newTask.groups" class="group_element">
                        <span>{{group}}</span>
                        <span class="close_elem icon-close" ng-click="newTask.groups.remove($index)"></span>
                    </div>
                </div>
            </div>
            <div class="field">
                <label for="worker">Исполнитель:</label>
                <input type="text" id="worker" class="ui-autocomplete-input"
                       ng-model="newTask.performers" ng-list autocomplete="off">

                <div class="worker_elements">
                    <div ng-repeat="performer in newTask.performers" class="worker_element">
                        <span>{{performer}}</span>
                        <span class="close_elem icon-close" ng-click="newTask.performers.remove($index)"></span>
                    </div>
                </div>
            </div>
            <div class="field">
                <label for="mark">Оценка*:</label>
                <span class="addition">(максимальный балл)</span>
                <input id="mark" name="maxMark" ng-model="newTask.maxMark" type="number" min="1"
                       ng-change="errors=null">
                <label style="color: red" ng-show="errors.maxMark!=null">{{errors.maxMark}}</label>
            </div>

            <div class="field">
                <label for="date">Начинается:</label>
                <input ng-model="newTask.startDate" type="date" ng-change="errors=null" id="date">
                <label style="color: red" ng-show="errors.startDate!=null">{{errors.startDate}}</label>
            </div>

            <div class="field">
                <label for="date">Заканчивается:</label>
                <input ng-model="newTask.deadline" type="date" ng-change="errors=null" id="date">
                <label style="color: red" ng-show="errors.deadline!=null">{{errors.deadline}}</label>
            </div>

            <div class="field">
                <label for="description">Описание:</label>
                <textarea name="descr" id="description" ng-model="newTask.description"></textarea>
            </div>
            <div class="field">
                <label for="files">Прикрепления: </label>
                <input id="files" name="attachments" type="file"
                       ng-model="attachments" ngf-select="true"
                       ngf-multiple="true" ngf-keep="true" ngf-keep-distinct="true">

                <div class="input_file">
                    <span class="icon icon-add_icon"></span>
                    <span>Прикрепить файл</span>
                </div>
                <output id="list">
                    <div ng-repeat="file in attachments" class="file_element">
                        <span>{{file.name}}</span> <span ng-click="attachments.remove($index)"
                                                         class="close_elem icon-close"></span></div>
                </output>
            </div>
            <button ng-if="!created" class="submit" type="submit" ng-click="createTask()">
                <span>Создать</span>
                <span class="icon-tick"></span>
            </button>
            <label style="color: lawngreen" ng-if="created">Создан</label>
        </form>
    </div>
</div>
